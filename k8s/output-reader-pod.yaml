apiVersion: v1
kind: Pod
metadata:
  name: mlmd-bom-output-reader
  labels:
    app: mlmd-bom-output-reader
spec:
  securityContext:
    seccompProfile:
      type: RuntimeDefault
    fsGroup: 1000
  restartPolicy: Always
  containers:
  - name: viewer
    image: wiebevandendriessche/mlmd-bom-viewer:latest
    imagePullPolicy: IfNotPresent
    ports:
    - containerPort: 5173
      name: http
    env:
    - name: NODE_ENV
      value: production
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop: ["ALL"]
      runAsNonRoot: true
      runAsUser: 1000
      runAsGroup: 1000
      seccompProfile:
        type: RuntimeDefault
    volumeMounts:
    - name: output
      mountPath: /output
    - name: logs
      mountPath: /logs
    readinessProbe:
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 5
      periodSeconds: 10
    livenessProbe:
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 15
      periodSeconds: 20
  volumes:
  - name: output
    persistentVolumeClaim:
      claimName: mlmd-bom-output-pvc
  - name: logs
    emptyDir: {}
